<ion-header [translucent]="true" class="custom-header">
  <ion-toolbar>

    <ion-title>Mi Perfil</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="profile-content">

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p>Cargando perfil...</p>
  </div>

  <!-- Profile Content -->
  <div *ngIf="!loading">

  <!-- Profile Header -->
  <div class="profile-header">
    <div class="profile-header-bg"></div>
    <div class="profile-info">
      <div class="avatar-container">
        <ion-avatar class="profile-avatar">
          <div class="avatar-initial">{{ getInitial(userProfile.name) }}</div>
        </ion-avatar>
        <ion-button class="avatar-edit-btn" fill="solid" size="small" (click)="openEditModal()">
          <ion-icon name="create-outline"></ion-icon>
        </ion-button>
      </div>

      <h1 class="profile-name">{{ userProfile.name }}</h1>

      <div class="profile-meta">
        <div class="meta-item">
          <ion-icon name="mail-outline"></ion-icon>
          <span>{{ userProfile.email }}</span>
        </div>
        <div class="meta-item">
          <ion-icon name="call-outline"></ion-icon>
          <span>{{ userProfile.phone }}</span>
        </div>

      </div>


    </div>
  </div>


  <!-- Account Settings -->
  <div class="settings-section">
    <h2 class="section-title">
      <ion-icon name="person-outline"></ion-icon>
      Cuenta
    </h2>

    <ion-list class="settings-list">


      <ion-item button detail (click)="togglePersonDetails()" class="setting-item">
        <ion-icon name="information-circle-outline" slot="start"></ion-icon>
        <ion-label>
          <h3>Ver información personal</h3>
          <p>Detalles completos de la persona</p>
        </ion-label>
      </ion-item>



    </ion-list>
   <!-- Person Details Section -->
   <div class="settings-section" *ngIf="showPersonDetails && personData">
     <h2 class="section-title">
       <ion-icon name="person-outline"></ion-icon>
       Información Personal
     </h2>

     <ion-list class="settings-list">
       <ion-item class="setting-item">
         <ion-icon name="person-outline" slot="start"></ion-icon>
         <ion-label>
           <h3>Nombre completo</h3>
           <p>{{ personData.firstName }} {{ personData.lastName }}</p>
         </ion-label>
       </ion-item>

       <ion-item class="setting-item">
         <ion-icon name="card-outline" slot="start"></ion-icon>
         <ion-label>
           <h3>Documento</h3>
           <p>{{ personData.document }}</p>
         </ion-label>
       </ion-item>

       <ion-item class="setting-item">
         <ion-icon name="call-outline" slot="start"></ion-icon>
         <ion-label>
           <h3>Teléfono</h3>
           <p>{{ personData.phone }}</p>
         </ion-label>
       </ion-item>

       <ion-item class="setting-item">
         <ion-icon name="mail-outline" slot="start"></ion-icon>
         <ion-label>
           <h3>Email</h3>
           <p>{{ personData.email }}</p>
         </ion-label>
       </ion-item>

       <ion-item class="setting-item">
         <ion-icon name="time-outline" slot="start"></ion-icon>
         <ion-label>
           <h3>Edad</h3>
           <p>{{ personData.age }} años</p>
         </ion-label>
       </ion-item>
     </ion-list>
   </div>
  </div>







  <!-- Support & Info -->
  <div class="settings-section">
    <h2 class="section-title">
      <ion-icon name="help-circle-outline"></ion-icon>
      Soporte e información
    </h2>

    <ion-list class="settings-list">
      <ion-item button detail (click)="viewHelp()" class="setting-item">
        <ion-icon name="help-circle-outline" slot="start"></ion-icon>
        <ion-label>
          <h3>Centro de ayuda</h3>
          <p>Preguntas frecuentes y soporte</p>
        </ion-label>
      </ion-item>

      <ion-item button detail (click)="viewTerms()" class="setting-item">
        <ion-icon name="document-text-outline" slot="start"></ion-icon>
        <ion-label>
          <h3>Términos y condiciones</h3>
          <p>Lee nuestros términos de uso</p>
        </ion-label>
      </ion-item>

      <ion-item button detail (click)="viewAbout()" class="setting-item">
        <ion-icon name="information-circle-outline" slot="start"></ion-icon>
        <ion-label>
          <h3>Acerca de ANPR Vision</h3>
          <p>Versión 1.0.0</p>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>

  <!-- Danger Zone -->
  <div class="settings-section danger-section">


    <ion-list class="settings-list">
      <ion-item button (click)="logout()" class="setting-item danger-item">
        <ion-icon name="log-out-outline" slot="start" color="danger"></ion-icon>
        <ion-label color="danger">
          <h3>Cerrar sesión</h3>
          <p>Salir de tu cuenta</p>
        </ion-label>
      </ion-item>


    </ion-list>
  </div>



  <!-- Padding bottom -->
  <div style="height: 100px;"></div>

  </div> <!-- End of profile content wrapper -->

</ion-content>
